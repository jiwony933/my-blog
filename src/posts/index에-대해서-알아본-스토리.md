---
title: '[DB] Index ì— ëŒ€í•´ì„œ ì•Œì•„ë³¸ ê¸´ê¸´ ìŠ¤í† ë¦¬'
date: '2023-05-14'
category: 'database'
summary: 'ì¸ë±ìŠ¤ë¥¼ í†µí•´ data ì¡°íšŒí•˜ì—¬ ì„±ëŠ¥ ë†’ì´ê¸°'
---

## 'indexë¥¼ íƒ„ë‹¤'ëŠ” ê²ƒì€ ë­˜ê¹Œ?

DBì—ì„œ ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ì—¬ ë°ì´í„°ë¥¼ ì°¾ê²Œ ë  ë•Œ, ì¸ë±ìŠ¤ë¥¼ íƒ€ì•¼ëœë‹¤ê³  í”ížˆ ì–˜ê¸°í•œë‹¤.
ê·¸ë ‡ë‹¤ë©´ `ì¸ë±ìŠ¤ë¥¼ íƒ„ë‹¤`ëŠ” ê²ƒì€ ë¬´ìŠ¨ ëœ»ì¼ê¹Œ? ì˜¤ëŠ˜ ë‹¤ ì•Œì•„ë³´ìž..!

### ìš°ì„  indexì— ëŒ€í•´ì„œ

> ðŸ“• ì˜ì–´ì‚¬ì „ì—ì„œ 'zoo'ë¼ëŠ” ë‹¨ì–´ë¥¼ ì°¾ì•„ë³¸ë‹¤ê³  ìƒê°í•´ë³´ìž.
>
> 1íŽ˜ì´ì§€ì˜ a-ë¡œ ì‹œìž‘í•˜ëŠ” ë‹¨ì–´ë¶€í„° ì°¾ëŠ” ì‚¬ëžŒì´ ìžˆì„ê¹Œ?
> (ë¬¼ë¡  ìžˆì„ìˆ˜ë„ ìžˆì§€ë§Œ ë§¤ìš° ì˜¤ëž˜ ê±¸ë¦´ ê²ƒì´ë‹¤! )
> ìš°ë¦¬ëŠ” ë³´í†µ z ì„¹ì…˜ìœ¼ë¡œ ë°”ë¡œ íŽ¼ì¹˜ê³ , ë‹¤ìŒ ê¸€ìžì¸ zo- ì„¹ì…˜ì„ ì°¾ê³ .. ì´ëŸ¬í•œ ë‹¨ê³„ë¡œ ë‹¨ì–´ë¥¼ ì°¾ì•„ë‚˜ê°„ë‹¤.
>
> ì´ê²ƒì´ ë°”ë¡œ indexë¥¼ íƒ€ê³  ë‹¨ì–´ë¥¼ ì°¾ì•„ë‚˜ê°€ëŠ” ê²ƒì´ë‹¤.

ê·¸ë ‡ë‹¤ë©´ DataBaseì—ì„œì˜ indexë¼ëŠ” ê²ƒì€ ë¬´ì—‡ì¼ê¹Œ?

ì¸ë±ìŠ¤(Index)ëŠ” ë°ì´í„°ë² ì´ìŠ¤ì˜ í…Œì´ë¸”ì— ëŒ€í•œ ê²€ìƒ‰ ì†ë„ë¥¼ í–¥ìƒì‹œì¼œì£¼ëŠ” ìžë£Œêµ¬ì¡°ì´ë‹¤.
íŠ¹ì • í…Œì´ë¸”ì˜ columnì— ëŒ€í•œ indexë¥¼ ë§Œë“¤ë©´ ë°ì´í„°ë² ì´ìŠ¤ ì—´ì˜ ê²€ìƒ‰ ì†ë„ê°€ ë¹¨ë¼ì ¸ì„œ ì¿¼ë¦¬ì˜ ì„±ëŠ¥ì´ í–¥ìƒëœë‹¤ !
indexë¥¼ íƒ€ì§€ ëª»í•˜ë©´ 'ì „ì²´ í…Œì´ë¸” ìŠ¤ìº”(full scan)' ë°©ì‹ì„ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ì°¾ê²Œ ëœë‹¤. (ì²˜ìŒë¶€í„° ëê¹Œì§€ ì°¾ê¸°..ê²€ìƒ‰ ì†ë„ê°€ ëŠë¦¬ê² ì£ ?)

indexë¥¼ íƒ„ë‹¤ == indexë¥¼ í†µí•´ íš¨ìœ¨ì ì¸ ê²€ìƒ‰ì„ í•œë‹¤ ì •ë„ê°€ ë˜ê² êµ°ìš”

### IndexëŠ” ì–´ë–»ê²Œ ìž‘ë™í•˜ëŠ” ê±´ë°?

indexëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë‹¨ê³„ë¡œ ìž‘ë™í•œë‹¤.

#### 1. index ìƒì„±

- ì»¬ëŸ¼ì˜ ê°’ë“¤ì„ ì •ë ¬í•´ì„œ data êµ¬ì¡°ë¡œ ë§Œë“ ë‹¤.
- êµ¬í˜„ ë°©ì‹ì— ë”°ë¼ B+tree í˜¹ì€ í•´ì‹œ ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•œë‹¤.
  > #### B+Tree
  >
  > - b-treeëŠ” ìžì‹ë…¸ë“œ-ë¶€ëª¨ë…¸ë“œë¡œ ì´ë£¨ì–´ì§„ íŠ¸ë¦¬ í˜•íƒœì˜ ìžë£Œ êµ¬ì¡°ì´ë‹¤.
  > - 2ê°œ ë§Œì„ ê°–ëŠ” ì´ì§„ íŠ¸ë¦¬(Binary Tree)ë¥¼ í™•ìž¥í•˜ì—¬ Nê°œì˜ ìžì‹ì„ ê°€ì§ˆ ìˆ˜ ìžˆê³ , ëª¨ë“  ë¦¬í”„ë…¸ë“œë“¤ì´ ê°™ì€ ë ˆë²¨ì„ ê°€ì§ˆ ìˆ˜ ìžˆë„ë¡ ìžë™ìœ¼ë¡œ ë°¸ëŸ°ìŠ¤ë¥¼ ë§žì¶”ëŠ” ê· í˜•ìž¡ížŒ íŠ¸ë¦¬ êµ¬ì¡°ì´ë‹¤.
  >
  > #### Hash
  >
  > - í•´ì‹œ í…Œì´ë¸”ì€ keyì™€ valueë¥¼ í•œ ìŒìœ¼ë¡œ ë°ì´í„°ë¥¼ ì €ìž¥í•˜ëŠ” ìžë£Œêµ¬ì¡°ì´ë‹¤.
  >   https://velog.io/@jiwonyyy/javascipt-Set-vs-Array-ì‹œê°„ë³µìž¡ë„-ë¹„êµ-í•´ì‹œí…Œì´ë¸”ì´ëž€

#### 2. index íƒìƒ‰ ë° data ê²€ìƒ‰

- í•´ë‹¹ ì»¬ëŸ¼ì— ëŒ€í•œ ê²€ìƒ‰ ì¿¼ë¦¬ê°€ ë‚˜íƒ€ë‚˜ë©´, ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ëŒ€ìƒ ë°ì´í„°ë¥¼ ì°¾ëŠ”ë‹¤.
- ê²€ìƒ‰ëœ indexë¥¼ í†µí•´ì„œ í•´ë‹¹ ë ˆì½”ë“œë¥¼ ì°¾ì•„ì„œ ë°˜í™˜

?? ê·¸ëŸ¬ë©´ ì´ í•´ì‹œì¸ì§€ ë¹„íŠ¸ë¦¬ì¸ì§€.. ì–´ë–»ê²Œ ì •í•˜ëŠ”ê±¸ê¹Œ? ë‚´ê°€ ì •í•´ì•¼í•˜ë‚˜??
ì •ë‹µì€ no...

### ì¿¼ë¦¬ ì˜µí‹°ë§ˆì´ì € (Query Optimizer)

ë‹¤í–‰ížˆë„, ë°ì´í„°ë² ì´ìŠ¤ ì‹œìŠ¤í…œì—ì„œëŠ” ì¿¼ë¦¬ ì‹¤í–‰ ì‹œ ì ì ˆí•œ ì¸ë±ìŠ¤ë¥¼ ì„ íƒí•˜ê³  ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ìžë™ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” `ì¿¼ë¦¬ ì˜µí‹°ë§ˆì´ì €(Query Optimizer)`ë¼ëŠ” ê²ƒì´ ìžˆë‹¤.

ì¿¼ë¦¬ ì˜µí‹°ë§ˆì´ì €ëŠ” ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìžˆëŠ”ì§€, ì–´ë–¤ ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í• ì§€, ì–´ë–¤ ìˆœì„œë¡œ í…Œì´ë¸”ì— ì ‘ê·¼í•´ì•¼ í•˜ëŠ”ì§€ ë“±ì„ ê²°ì •í•œë‹¤. ì´ë•Œ ì¿¼ë¦¬ ì˜µí‹°ë§ˆì´ì €ëŠ” í…Œì´ë¸”ì— ëŒ€í•œ í†µê³„ ì •ë³´, ì¸ë±ìŠ¤ êµ¬ì¡°, ì¿¼ë¦¬ ì¡°ê±´ ë“±ì„ ê³ ë ¤í•˜ì—¬ ìµœì ì˜ ì‹¤í–‰ ê³„íšì„ ìˆ˜ë¦½í•œë‹¤.

#### B tree ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°

- ë²”ìœ„ ê²€ìƒ‰(Range Query)
- ì¤‘ë³µ ê°’ì„ ê°€ì§€ëŠ” ì»¬ëŸ¼
- ìžì£¼ ê°±ì‹ ë˜ëŠ” ë°ì´í„°

#### í•´ì‹œ ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°

- ë“±í˜¸ ê²€ìƒ‰(Exact Match Query)
- ê³ ì • ê¸¸ì´ì˜ í‚¤(Key)
- ìžì£¼ ê°±ì‹ ë˜ì§€ ì•ŠëŠ” ë°ì´í„°

### ê·¸ë ‡ë‹¤ë©´ indexë¥¼ ë¬´ì¡°ê±´ ì„¤ì •í•˜ëŠ” ê²ƒì´ ì¢‹ì§€ ì•Šì•„?

ë¬´ì¡°ê±´ ì¢‹ì€ ê²ƒ... ì´ë¼ëŠ”ê²Œ ìžˆì„ê¹Œ?

- ì¸ë±ìŠ¤ëŠ” ë°ì´í„°ë² ì´ìŠ¤ì˜ ìš©ëŸ‰ì„ ì¦ê°€ì‹œí‚¨ë‹¤.
- ë˜í•œ data Insert, Update, delete ìž‘ì—…ì˜ ì†ë„ë¥¼ ëŠ¦ì¶œ ìˆ˜ ìžˆë‹¤.
  > - INSERT : ìƒˆë¡œìš´ ë°ì´í„°ì— ëŒ€í•œ ì¸ë±ìŠ¤ë¥¼ ì¶”ê°€í•´ì•¼ í•¨
  > - DELETE : ì‚­ì œí•˜ëŠ” ë°ì´í„°ì˜ ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ìž‘ì—… ìˆ˜í–‰í•´ì•¼ í•¨
  > - UPDATE : ê¸°ì¡´ì˜ ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ ì²˜ë¦¬, ê°±ì‹ ëœ ë°ì´í„°ì— ëŒ€í•œ ì¸ë±ìŠ¤ ì¶”ê°€í•´ì•¼ í•¨.
  >   => ê·¸ëŸ¬ë¯€ë¡œ indexëŠ” ì ì ˆí•œ columnì— ëŒ€í•´ì„œë§Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤ !

### ê·¸ëŸ¬ë©´ indexë¥¼ ì–¸ì œ ì„¤ì •í•˜ë©´ ì¢‹ì„ê¹Œ?

1. data row ìˆ˜ê°€ ë§Žì€ ê²½ìš°
2. ì¸ë±ìŠ¤ë¥¼ ì ìš©í•œ ì»¬ëŸ¼ì´ whereì ˆì—ì„œ ë§Žì´ ì‚¬ìš©ë˜ëŠ” ê²½ìš°
3. ê²€ìƒ‰ ê²°ê³¼ê°€ ì›ë³¸ í…Œì´ë¸” ë°ì´í„°ì— ë¹„í•´ ì ì„ ê²½ìš°
4. í•´ë‹¹ ì»¬ëŸ¼ì´ nullì„ í¬í•¨í•˜ëŠ” ê²½ìš° (NULL ê°’ì„ ê°€ì§„ ë…¸ë“œë¥¼ ê±´ë„ˆë›°ê³  ê²€ìƒ‰ì„ ìˆ˜í–‰)

## Sqlì—ì„œ index ì‚¬ìš©í•˜ëŠ” ë°©ë²•

ìš°ì„ , ê¸°ì¡´ì˜ tableì„ ê¹Œë³´ìž

```sql
DESCRIBE users;
```

![](https://velog.velcdn.com/images/jiwonyyy/post/60e39814-8e00-4b0a-8f30-56f9a2b17cb2/image.png)

ì—¬ê¸°ì„œ key ì»¬ëŸ¼ì— ê°’ì´ ë“¤ì–´ê°„ í•„ë“œë“¤ì´ ìžˆë‹¤.

keyì—ëŠ” ì„¸ê°€ì§€ê°€ ë“¤ì–´ê°ˆ ìˆ˜ ìžˆëŠ”ë°
`PRI` = primary key
`UNI` = unique key
`MUL` = Multiple

ì´ì¤‘ í•˜ë‚˜ë¼ë„ ë“¤ì–´ê°€ ìžˆìœ¼ë©´ ì¸ë±ìŠ¤ë¥¼ íƒ€ëŠ” í•„ë“œë“¤ì´ë‹¤!

### indexë¥¼ ì¶”ê°€í•˜ëŠ” ë°©ë²•

í•„ë“œì— ì¸ë±ìŠ¤ë¥¼ ì–´ë–»ê²Œ ì¶”ê°€í• ê¹Œ?
primary keyì´ê±°ë‚˜ unique ì¸ ê²½ìš°ëŠ” ìžë™ìœ¼ë¡œ ì¸ë±ìŠ¤ê°€ ìƒì„±ì´ ë˜ê³ , íŠ¹ì • ì»¬ëŸ¼ì— ë‹¤ìŒê³¼ ê°™ì€ ëª…ë ¹ì–´ë¡œ ì¶”ê°€í•  ìˆ˜ë„ ìžˆë‹¤.

```sql
CREATE INDEX ì¸ë±ìŠ¤ëª… ON í…Œì´ë¸”ëª… (ì»¬ëŸ¼ëª…);
```

ë§Œë“¤ì—ˆë˜ ì¸ë±ìŠ¤ ì œê±°í•˜ë ¤ë©´

```sql
DROP INDEX ì¸ë±ìŠ¤ëª…;
```

ìž ê·¸ëŸ¼ ì´ì œ ë‚´ê°€ ì‹¤í–‰ì‹œí‚¨ ì¿¼ë¦¬ê°€ ì¸ë±ìŠ¤ë¥¼ íƒ€ëŠ”ì§€ ì•ˆíƒ€ëŠ”ì§€ í™•ì¸í•´ë³´ìž.
ì¡°ê±´ì´ ìžˆëŠ” ì¿¼ë¦¬ë¬¸ì˜ ì‹¤í–‰ ê³„íšì„ ë³´ìž.

> 1.  ì¸ë±ìŠ¤ë¥¼ íƒ€ëŠ” ê²½ìš° (phone_number)

```sql
explain select * from users where phone_number like '0103300%';
```

![](https://velog.velcdn.com/images/jiwonyyy/post/05b52ef8-3ccc-41f6-afd3-08069070e7b6/image.png)

> 2. ì¸ë±ìŠ¤ë¥¼ íƒ€ì§€ ì•ŠëŠ” ê²½ìš° (pccc)

```sql
explain select * from users where pccc like '123%';
```

![](https://velog.velcdn.com/images/jiwonyyy/post/8c99061e-06be-4274-8dc9-853a92541528/image.png)

ì‹¤í–‰ ê³„íšì„ í™•ì¸í–ˆì„ ë•Œ keyê°’ì— index-nameì´ ìžˆìœ¼ë©´, í•´ë‹¹ ì¸ë±ìŠ¤ë¥¼ íƒ€ê³  íƒìƒ‰ì´ ë˜ê³  ìžˆëŠ” ê²ƒì´ê³ , ì—†ìœ¼ë©´ full-scanì„ í†µí•´ì„œ ê°’ì„ ì°¾ëŠ” ê²ƒì´ë‹¤.

### ì£¼ì˜ì‚¬í•­

íž˜ë“¤ê²Œ indexì— ëŒ€í•´ì„œ ì•Œì•„ ë†“ê³ .. indexë¥¼ íƒœìš°ì§€ ì•ŠëŠ” ì¿¼ë¦¬ë¥¼ ë§Œë“¤ì–´ ë‚´ë©´ ì•ˆë  ê²ƒì´ë‹¤.

ëŒ€í‘œì ì¸ ì‹¤ìˆ˜ë¡œ indexê°€ ê±¸ë ¤ìžˆëŠ” ê°’ì„ í˜•ë³€í™˜ í•´ì„œ ê²€ìƒ‰í•˜ëŠ” ê²½ìš°ê°€ ìžˆë‹¤. í˜•ë³€í™˜ì´ ì´ë£¨ì–´ì§„ ê²½ìš°, ì¿¼ë¦¬ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì¡°ê±´ ê°’ì´ ì¸ë±ìŠ¤ ì»¬ëŸ¼ê³¼ ë°ì´í„° íƒ€ìž…ì´ ì¼ì¹˜í•˜ì§€ ì•Šì•„ í’€ ìŠ¤ìº”ì„ ìˆ˜í–‰í•˜ê²Œ ëœë‹¤.

### example

```js
// BAD
minCreatedAt &&
  (query = query.andWhere('date(oi.createdAt) >= :minCreatedAt', {
    minCreatedAt,
  }));
maxCreatedAt &&
  (query = query.andWhere('date(oi.createdAt) <= :maxCreatedAt', {
    maxCreatedAt,
  }));
```

ì½”ë“œì—ì„œ date í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•¨ìœ¼ë¡œì¨ í˜•ë³€í™˜ì´ ì´ë£¨ì–´ì ¸ indexë¥¼ ê°€ì§„ ì»¬ëŸ¼ì´ë¼ë„, ì¸ë±ìŠ¤ë¥¼ íƒ€ê³  ê²€ìƒ‰ì„ í•˜ì§€ ëª»í•œë‹¤. ì´ëŸ° ê²½ìš°ì—ëŠ” ì½”ë“œë¥¼ ìˆ˜ì •í•´ì£¼ì–´ì•¼ í•œë‹¤!

createdAt ê°’ì„ BETWEEN ì—°ì‚°ìžë¥¼ ì‚¬ìš©í•˜ì—¬ ë²”ìœ„ë¥¼ ì§€ì •í•˜ë„ë¡ ìˆ˜ì •í•˜ì˜€ë‹¤. ì´ë ‡ê²Œ í•˜ë©´ createdAt ê°’ì´ ì§ì ‘ ë¹„êµë˜ë¯€ë¡œ ì¸ë±ìŠ¤ë¥¼ íƒ€ê²Œ ëœë‹¤

```js
// GOOD
minCreatedAt &&
  maxCreatedAt &&
  (query = query.andWhere(
    'oi.createdAt BETWEEN :minCreatedAt AND :maxCreatedAt',
    {
      minCreatedAt,
      maxCreatedAt,
    }
  ));
```

## Full text index

ê·¸ë ‡ë‹¤ë©´ ê²€ìƒ‰ ì¿¼ë¦¬ë¥¼ ì‚´íŽ´ë³´ìž.
ê¸°ì¡´ì˜ ì„œë²„ ì½”ë“œë¥¼ ì‚´íŽ´ë³´ë©´..

```js
searchTerm &&
  (query = query.andWhere(
    `concat_ws(' ', pv.model, pv.erpCode) like :searchTerm`,
    {
      searchTerm: `%${searchTerm}%`,
    }
  ));
```

ì´ ì½”ë“œëŠ” ì•„ëž˜ì™€ ê°™ì€ ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•œë‹¤

```sql
select * from product_variations pv
where concat_ws(' ', pv.model, pv.erp_code) like '%í…Œì´ë¸”%';
```

![](https://velog.velcdn.com/images/jiwonyyy/post/3ecb0c5e-bfd3-43ed-9cb4-55215ce67af7/image.png)

model, erpCodeëŠ” ëª¨ë‘ indexë¥¼ ê°–ëŠ” í•„ë“œìž„ì—ë„ ë¶ˆêµ¬í•˜ê³ 
concat methodë¡œ ë¬´ìžë¹„í•˜ê²Œ í•©ì³ë²„ë ¸ìœ¼ë‹ˆ ã… ã… 
ì•„ë¬´ë¦¬ ì¸ë±ìŠ¤ë¥¼ ê°€ì§„ë‹¤í•´ë„ í’€ìŠ¤ìº”ìœ¼ë¡œ ê²€ìƒ‰í•˜ëŠ” ì¤‘ì´ì—ˆë‹¤...............

ê·¸ëž˜ì„œ indexë¥¼ ê³µë¶€í•œ í›„ì—
ê·¸ëŸ¼ concatìœ¼ë¡œ í•˜ì§€ë§ê³  or ì¡°ê±´ì„ ë„£ì–´ì„œ í•´ë´ì•¼ì§€! ë¼ê³  ë‹¤ìŒê³¼ ê°™ì´ ì¿¼ë¦¬ë¬¸ì„ ê³ ì³ë³´ì•˜ë‹¤

```sql
select * from product_variations pv
where pv.erp_code like '%123%' or pv.model like '%123%';
```

![](https://velog.velcdn.com/images/jiwonyyy/post/7bf1d4a1-ca06-452e-912e-cdcc8ae9c7c2/image.png)

ê·¼ë° ì—¬ì „ížˆ ì¸ë±ìŠ¤ë¥¼ íƒ€ì§€ ì•ŠëŠ” ê²ƒì„ í™•ì¸í•˜ì˜€ë‹¤.

ê·¸ ì´ìœ ë¥¼ ì•Œì•„ë³´ë‹ˆ,
LIKE ì—°ì‚°ìžë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°, ì™€ì¼ë“œì¹´ë“œ(%)ë¥¼ ì‚¬ìš©í•˜ë©´ ë²”ìœ„ ê²€ìƒ‰ì´ ë¶ˆê°€ëŠ¥ í•˜ì—¬ ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ê²Œ ë  ìˆ˜ ìžˆë‹¤ê³  í•œë‹¤.

LIKE ì—°ì‚°ìžë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” ì™€ì¼ë“œì¹´ë“œ(%)ë¥¼ ìµœëŒ€í•œ ì ê²Œ ì‚¬ìš©í•˜ê³ , ë§Œì•½ì— ì‚¬ìš©í•´ì•¼ í•œë‹¤ë©´ ì™€ì¼ë“œì¹´ë“œê°€ ìžˆëŠ” ë¶€ë¶„ ì´ì „ê¹Œì§€ëŠ” ì •í™•í•œ ê°’ì„ ì§€ì •í•´ ì£¼ê±°ë‚˜, (í•œìª½ë§Œ ì™€ì¼ë“œì¹´ë“œì¼ ì‹œì—ëŠ” ì¸ë±ìŠ¤ íƒ)

ì»¬ëŸ¼ì—ì„œ ì¼ë¶€ ë¬¸ìžì—´ì„ ì°¾ì•„ì•¼ í•˜ëŠ” ê²½ìš°ì—ëŠ”, ì „ì²´ í…Œì´ë¸”ì„ ìŠ¤ìº”í•˜ì§€ ì•Šê³ ë„ ì¸ë±ìŠ¤ë¥¼ ì´ìš©í•œ ê²€ìƒ‰ì´ ê°€ëŠ¥í•œ Full Text Search(Full-Text Indexing) ê¸°ëŠ¥ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤.

ì´ ì¼€ì´ìŠ¤ì˜ ê²½ìš°
ë‹¤ì–‘í•œ ì»¬ëŸ¼ì˜ ê°’ì— ëŒ€í•´ì„œ `ì¼ë¶€ í…ìŠ¤íŠ¸`ê°€ ì¼ì¹˜í•˜ëŠ” ë ˆì½”ë“œë¥¼ ê°€ì ¸ì™€ì•¼í•˜ê¸° ë•Œë¬¸ì— í’€í…ìŠ¤íŠ¸ ì„¤ì •ì„ í•´ë‘ëŠ” ê²ƒì´ ë§žë‹¤. (ì˜ˆì‹œë¡œëŠ” 2ê°œ ì»¬ëŸ¼ì´ì§€ë§Œ ì‹¤ì œë¡œëŠ” 10ê°œ ë„˜ëŠ” ì»¬ëŸ¼ì— ëŒ€í•œ ê²€ìƒ‰ì´ í•„ìš”í–ˆìŒ)

### í’€í…ìŠ¤íŠ¸ ì¸ë±ìŠ¤ ì„¤ì •í•˜ê¸°

1. í’€í…ìŠ¤íŠ¸ ì„¤ì •í•  ì»¬ëŸ¼ë“¤ì„ ëª¨ì•„ì„œ add fulltext

```sql
alter table product_variations add FULLTEXT (model, erp_code);
```

2. whereì ˆì— likeê°€ ì•„ë‹Œ match-againstë¡œ ì¡°ê±´ ì£¼ê¸°

```sql
select * from product_variations
where MATCH (model, erp_code) AGAINST ('%123%' IN BOOLEAN MODE);
```

![](https://velog.velcdn.com/images/jiwonyyy/post/a1932040-4338-4d95-8667-28b41eb0891d/image.png)

ì´ë ‡ê²Œ fulltext indexë¥¼ ì´ìš©í•˜ì—¬ ê²€ìƒ‰ ì†ë„ë¥¼ í–¥ìƒì‹œí‚¬ ìˆ˜ ìžˆë‹¤~!

---
